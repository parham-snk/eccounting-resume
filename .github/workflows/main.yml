name : CI
on:
  push:
   branches : master

permissions:
  contents : read
  pages : write
  id-token : write

jobs:
  build:
    runs-on : ubuntu-latest
    steps:
      - name : fetch data
        uses : actions/checkout@v4
      - name : setup nodejs
        uses : actions/setup-node@v4
      - name : cache
        uses : actions/cache@v4
        with: 
          path : node_modules
          key : npm-${{ hashFiles('package.lock.json') }}
      - name : install packages
        run : npm install 
      - name : build 
        run : CI=false npm run build 
      - name : set artifact
        uses : actions/upload-pages-artifact@v3
        with:
          path : build
  deploy:
    needs : build
    runs-on : ubuntu-latest
    steps:
      - name : deploy
        uses: actions/deploy-pages@v4
